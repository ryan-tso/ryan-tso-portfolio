import Head from 'next/head'
import { Box, Typography, useTheme } from "@mui/material";
import { Slide, Fade } from "react-awesome-reveal";
import { Title, AboutMe, Navbar, Skills, Experience, Projects, Contact } from "../Components/index";
import { ABOUT_ME, SKILLS, EXPERIENCE, PROJECTS } from "../data";

export const getStaticProps = async () => {
  return {
    props: {
      aboutMeData: ABOUT_ME,
      skillsData: SKILLS,
      experienceData: EXPERIENCE,
      projectsData: PROJECTS
    }
  }
}


export const sectionLayout = {
  position: 'relative',
  display: 'flex',
  flexDirection: 'column',
  width: '100%',
  overflow:'hidden',
  background: 'linear-gradient(90deg, #e7e7e7 0%, #f4f4f4 25%, #f4f4f4 75%, #e7e7e7 100%)'
}

export const sectionInnerLayout = {
  position: 'relative',
  display: 'flex',
  flexDirection: 'row',
  ml: 'auto',
  mr: 'auto',
  width: {xs: "100%", sm: "80%", md: "60%"},
  minWidth: '360px',
  maxWidth: '1000px',
  height: "100%",
}


export default function Home(props) {
  const theme = useTheme();

  const navbarHeight = 60

  const headerContainerStyle = {
    position: 'relative',
    width: '100%',
    display: 'flex',
    background: 'linear-gradient(90deg, #e7e7e7 0%, #f4f4f4 25%, #f4f4f4 75%, #e7e7e7 100%)',
    backgroundColor: 'purple'
  }

  const sectionHeaderStyle = {
    fontFamily: theme.typography.sectionHeader,
    fontWeight: 300,
    fontSize: {xs:'2.5rem', sm:'3rem', md: '3.5rem'},
    color: '#3d3d3d',
    ml: 'auto',
    mr: 'auto',
  }

  const spacerStyle = {
    width: '100%',
    height: '50%',
    pt: '2vh',
    background: 'linear-gradient(90deg, #e7e7e7 0%, #f4f4f4 25%, #f4f4f4 75%, #e7e7e7 100%)'
  }
  const triangleStyle = {
    position: 'sticky',
    top: '60px',
    width: '100%',
    height: '30%',
    clipPath: 'polygon(10% 0, 50% 100%, 90% 0)',
    backgroundColor: 'rgba(255, 255, 255, 0.7)',
  }

  const endCapStyle = {
    width: '100%',
    height: '50vh',
    backgroundColor: theme.palette.endCap.background
  }

  const Spacer = ({color}) => (
    <Box sx={spacerStyle}>
      <Box sx={{...triangleStyle, ...(color && {backgroundColor: color})}} />
    </Box>
  )

  const Header = ({sectionName, sectionId}) => (
    <Box sx={headerContainerStyle}>
      <Box id={sectionId} sx={{position: 'absolute', width: '100%', top: -navbarHeight}}/>
      <Fade duration={1500} triggerOnce style={{display: 'flex', width: '100%'}}>
        <Typography sx={sectionHeaderStyle}>
          {sectionName}
        </Typography>
      </Fade>
    </Box>
  )

  return (
    <Box sx={{width: '100vw', height: '100vh', overflow: 'auto'}}>
      <Head>
        <title>Ryan Tso</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/RyanTsoLogo.ico" />
      </Head>

      <Title />
      <Navbar height={navbarHeight}/>

      <Spacer />

      <Header sectionName="About Me" sectionId="aboutme" />
      <AboutMe data={props.aboutMeData}/>

      <Spacer color='rgba(154,167,176,0.2)'/>

      <Box sx={headerContainerStyle}>
        <Box id="skills" sx={{position: 'absolute', width: '100%', top: -navbarHeight}}/>
        <Box sx={{width: '100%'}}>
          <Slide direction="left">
            <Box sx={{display: 'flex', backgroundColor: theme.palette.skills.header}}>
              <Typography sx={{...sectionHeaderStyle, color: 'white'}}>
                Skills
              </Typography>
            </Box>
          </Slide>
        </Box>
      </Box>
      <Skills data={props.skillsData}/>

      <Spacer />

      <Header sectionName="Experience" sectionId="experience" />
      <Experience data={props.experienceData}/>

      <Spacer color='rgba(154,167,176,0.2)'/>

      <Header sectionName="Projects" sectionId="projects" />
      <Projects data={props.projectsData}/>

      <Spacer />

      <Box sx={{...headerContainerStyle}}>
        <Box id="contact" sx={{position: 'absolute', width: '100%', top: -navbarHeight}}/>
        <Box sx={{width: '100%', backgroundColor: theme.palette.contact.background, overflow: 'hidden'}}>
          <Slide direction="right" triggerOnce>
            <Fade triggerOnce>
              <Box sx={{...sectionInnerLayout, }}>
                <Typography sx={{...sectionHeaderStyle, ml: {xs: '10%', sm: 0}, color: 'white'}}>
                  Contact
                </Typography>
              </Box>
            </Fade>
          </Slide>
        </Box>
      </Box>
      <Contact />

      <Box sx={endCapStyle}/>

    </Box>
  )
}
